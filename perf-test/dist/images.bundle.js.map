{"version":3,"file":"images.bundle.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,iDCL9D,MAAM,EAA+BC,QAAQ,W,aCA7C,MAAM,EAA+BA,QAAQ,MCGhCC,EAAU,CACnBC,UAAW,CACP,kBAAqB,CACjBC,SAAU,cACVC,SAAU,EACVC,OAAQ,CAAC,CAACC,SAAU,MAAOC,OAAQ,IAAK,CAACD,SAAU,MAAOC,OAAQ,KAAM,CAACD,SAAU,MAAOC,OAAQ,KAClGC,iBAAkB,OAEvBC,WAAY,CACXC,kBAAmB,CAAC,aACpBC,gBAAiB,CAAC,eAKpBC,EAAS,CACXC,KAAM,CAACC,KAAM,eAKF,SAAS,IACpB,MAAMC,EAAKC,IACLC,EAAMC,IAAAA,IAASH,EAAK,IAAKH,KAE/BO,EAAAA,EAAAA,OAAMF,EAAK,CAAC,gBAAiBG,IAErBC,QAAQC,IAAIF,EAAEG,OAAQH,EAAEL,KAEJ,MAAbK,EAAEG,WAGjBC,EAAAA,EAAAA,OAAM,EACV,CAEA,MAAMR,EAAeA,KACjB,IAAIS,EAAOC,EAAMC,EAAU,EAAGD,EAAME,OAAS,IAG7C,OADAH,EAAOA,EAAKI,QAAQ,UAAY,IAAGF,EAAU,IAAI,QACxC,wBAAuBF,GAAM,EAIpCE,EAAYA,CAACG,EAAKC,IACbC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,GAGxD,IAAIJ,EAAQ,CACR,qHACA,wHACA,uHACA,uHACA,sHACA,0HACA,iHACA,wHACA,uHACA,yHACA,uHACA,wHACA,iHACA,kHACA,kHACA,kHACA,uHACA,uHACA,sHACA,uHACA,uHACA,uHACA,uHACA,sHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,sHACA,uHACA,uHACA,uHACA,uHACA,sHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,sHACA,uHACA,uHACA,uHACA,uHACA,uHACA,uHACA,wH","sources":["webpack://imageproxy-perf/webpack/bootstrap","webpack://imageproxy-perf/webpack/runtime/compat get default export","webpack://imageproxy-perf/webpack/runtime/define property getters","webpack://imageproxy-perf/webpack/runtime/hasOwnProperty shorthand","webpack://imageproxy-perf/webpack/runtime/make namespace object","webpack://imageproxy-perf/external commonjs \"k6/http\"","webpack://imageproxy-perf/external commonjs \"k6\"","webpack://imageproxy-perf/./images_test.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6/http\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6\");","import http from 'k6/http';\nimport {check, sleep} from 'k6';\n\nexport const options = {\n    scenarios: {\n        'imageproxy_images': {\n            executor: 'ramping-vus',\n            startVUs: 0,\n            stages: [{duration: '10s', target: 50}, {duration: '60s', target: 100}, {duration: '10s', target: 50},],\n            gracefulRampDown: '5s',\n        }\n    }, thresholds: {\n        http_req_duration: ['p(95)<200'], // 95% of requests should be below 200ms\n        http_req_failed: ['rate<0.01'], // http errors should be less than 1%\n\n    },\n};\n\nconst params = {\n    tags: {name: 'imageproxy'},\n}\n// https://qa.totalwine.com/dynamic/x490,4pk/media/sys_master/twmmedia/hf1/h54/14888181334046.png\n// const url = `https://qa.totalwine.com/dynamic/x490,4pk/media/sys_master/twmmedia/hf1/h54/14888181334046.png`;\n\nexport default function () {\n    const url =getRandomUrl();\n    const res = http.get(url, { ...params });\n\n    check(res, {'is status 200': r => {\n            // if (r.status === 200) return true;\n            console.log(r.status, r.url);\n            // return false;\n            return r.status === 200;\n        }});\n\n    sleep(1);\n}\n\nconst getRandomUrl = () => {\n    let path = paths[randomInt(0, paths.length - 1)];\n    // path = path.replace('{rand}', `k2${randomInt(1,10000)}`);\n    path = path.replace(/x[0-9]+/, `x${randomInt(100,1000)}`);\n    return  `http://localhost:8080${path}`;\n}\n//https://qa.totalwine.com/dynamic/x220,375ml/sys_master/twmmedia/h04/h19/14405062262814.png\n\nconst randomInt = (min, max) => { // min and max included\n    return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nlet paths = [\n    \"/x220,375ml/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h04/h19/14405062262814.png\",\n    \"/x1000,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h43/hc1/14938355531806.png\",\n    \"/270x,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h71/hb7/12267817926686.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hfd/h83/12034978611230.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hb4/h56/9683874873374.png\",\n    \"/x1000,50ml,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h09/hbe/15448923635742.png\",\n    \"/sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hba/h71/9299438862366.png\",\n    \"/x1000,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h95/h0a/15448916230174.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h3a/h99/11192415289374.png\",\n    \"/x220,200ml,webp/https://storage.googleapis.com/hybris-public-production/sys_master/cmsmedia/hf6/h2c/8979036504094.png\",\n    \"/x155,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h02/h5d/15449032687646.png\",\n    \"/x155,4pk,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h36/h62/16964328456222.png\",\n    \"/sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h6b/h86/8805919490078.png\",\n    \"/sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h21/h5f/13763295019038.png\",\n    \"/sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h07/h22/12338782142494.png\",\n    \"/sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h02/h1a/14590886281246.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf2/he7/26565062557726.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/had/hef/14521135136798.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h91/hf4/8802820423710.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h8a/hb9/13512306458654.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h72/hdd/10777597444126.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h63/h69/13713376870430.png\",\n    \"/x450,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/h48/hec/15280777723934.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hfd/hf2/8810640211998.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hfc/h4b/12245177139230.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hfa/hdf/12056616992798.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf8/he1/14271263178782.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf8/h7f/26701864632350.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf7/hd0/16102248120350.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf6/h79/16156004220958.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf5/h7d/17159611777054.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf4/ha7/8804650123294.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf2/h60/15992134467614.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf1/h1d/10675638468638.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hf0/h36/27446335406110.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hed/h69/28405437661214.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hec/hc8/9923797680158.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/heb/h84/13474955788318.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/heb/h80/28335705817118.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hea/h53/27178157375518.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he7/h70/12322315173918.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he7/h2d/26523099496478.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he7/h28/27279495888926.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he4/he7/14936818090014.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he1/hd8/10873843417118.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he1/h9c/14575203713054.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he1/h35/28358492749854.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he0/hf0/13909180448798.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/he0/h23/8798265049118.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hdf/hda/14202389987358.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hde/hb7/28597737947166.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hdc/h80/16036737417246.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hdb/h8f/26799410315294.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hd9/h2f/11941568741406.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hd5/h4f/16872939192350.png\",\n    \"/x220,sq,webp/https://storage.googleapis.com/hybris-public-production/sys_master/twmmedia/hd4/h59/28134069075998.png\"\n]\n//\n//\n// paths = [\n//     'dynamic/x250,sq,k2{rand}/media/sys_master/twmmedia/h39/hc0/15078186647582.png',\n// ];\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","require","options","scenarios","executor","startVUs","stages","duration","target","gracefulRampDown","thresholds","http_req_duration","http_req_failed","params","tags","name","url","getRandomUrl","res","http","check","r","console","log","status","sleep","path","paths","randomInt","length","replace","min","max","Math","floor","random"],"sourceRoot":""}